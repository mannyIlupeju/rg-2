import PortableTextComponent from '../../components/Shared/PortableTextComponent';
import { sanityClient } from '../../lib/sanity';

import React from 'react';
import Image from 'next/image'
// import Navigation from '@/components/Shared/Navigation/Navigation';
import Navigation from '../../components/Shared/Navigation/Navigation'
// import Login from '@/components/Authorization/Login';
import Login from '../../components/Authorization/Login'
// import Register from '@/components/Authorization/Register';
import Register from '../../components/Authorization/Register';
import Head from 'next/head'
import Footer from '../../components/Shared/Footer/Footer'
// import RespMenu from '@/components/responsiveMenu/RespMenu';
import RespMenu from '../../components/responsiveMenu/RespMenu'
// import { useGlobalContext } from '@/ Context/context'
import { useGlobalContext } from '../../ Context/context';



const About = ({ data }) => {
  const { isOpenMenu, isSignIn, isUserRegistered } = useGlobalContext();
  const { about } = data;
  const [aboutUs] = about;

  return (
    <>
      <Head>
        <title>About Us</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {isOpenMenu && <RespMenu />}
      <Navigation />
      {isSignIn && <Login />}
      {isUserRegistered && <Register />}

      <main>
        <div className="container mx-auto md:p-12 py-48 lg:py-48 flex flex-col gap-10">
          <div className="flex flex-col lg:flex-row gap-24 text-zinc-700">
            <article className="flex-1 text-lg items-star p-14 lg:p-4">
              <PortableTextComponent detail={aboutUs} />
            </article>
            <div className="flex-shrink-0 p-2 justify-center">
              <Image src={about[0].aboutImage} width={500} height={500} alt="About Image" className="rounded shadow-lg" loading='lazy' />
            </div>
          </div>
        </div>
      </main>

      <Footer />
    </>
  );
};


export default About;



const aboutInfo = `*[_type == 'about']{
  "aboutImage":image.asset->url,
  post,
  aboutus
}`

export async function getStaticProps() {
  const about = await sanityClient.fetch(aboutInfo)

  return {
    props: {
      data: { about },
    },
    revalidate: 60,
  }
}

