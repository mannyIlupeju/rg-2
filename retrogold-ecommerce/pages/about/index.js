import PortableTextComponent from '@/components/Shared/PortableTextComponent';
import { sanityClient } from '@/lib/dist/sanity.dev';
import React from 'react';
import Image from 'next/image'
import Navigation from '@/components/Shared/Navigation';
import Login from '@/components/Authorization/Login';
import Register from '@/components/Authorization/Register';
import Head from 'next/head'
import Footer from '@/components/Shared/Footer/footer';
import RespMenu from '@/components/responsiveMenu/RespMenu';
import { useGlobalContext } from '@/ Context/context'



const About = ({ data }) => {
  const { isOpenMenu, isSignIn, isUserRegistered } = useGlobalContext();
  const { about } = data;
  const [aboutUs] = about;

  return (
    <>
      <Head>
        <title>About Us</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {isOpenMenu && <RespMenu />}
      <Navigation />
      {isSignIn && <Login/>}
      {isUserRegistered && <Register />}

      <main className="section-background">
        <div className="container mx-auto p-8 md:p-12 lg:p-24 flex flex-col gap-10">
          <div className="flex flex-col md:flex-row gap-10 items-center text-zinc-700">
            <article className="flex-1 leading-relaxed text-lg">
              <PortableTextComponent detail={aboutUs} />
            </article>
            <div className="flex-shrink-0">
              <Image src={about[0].aboutImage} width="400" height="400" alt="About Image" className="rounded shadow-lg" unoptimized priority={true} />
            </div>
          </div>
        </div>
      </main>

      <Footer />
    </>
  );
};


export default About;



const aboutInfo = `*[_type == 'about']{
  "aboutImage":image.asset->url,
  post,
  aboutus
}`

export async function getStaticProps() {
  const about = await sanityClient.fetch(aboutInfo)

  return {
    props: {
      data: {about},
    }
  }
}

