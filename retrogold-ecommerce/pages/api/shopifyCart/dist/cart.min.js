"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handler;var _nodeFetch=_interopRequireDefault(require("node-fetch"));function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}function handler(t,e){var r,a,o;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if("POST"===t.method)return n.prev=1,t.body.productAdded,r={merchandiseId:id,quantity:quantity},"\n                mutation createCart($cartInput: CartInput) {\n                cartCreate(input: $cartInput) {\n                    cart {\n                    id\n                    createdAt\n                    updatedAt\n                    checkoutUrl\n                    lines(first: 10) {\n                        edges {\n                        node {\n                            id\n                            merchandise {\n                            ... on ProductVariant {\n                                id\n                            }\n                            }\n                        }\n                        }\n                    }\n                    attributes {\n                        key\n                        value\n                    }\n                    cost {\n                        totalAmount {\n                        amount\n                        currencyCode\n                        }\n                        subtotalAmount {\n                        amount\n                        currencyCode\n                        }\n                        totalTaxAmount {\n                        amount\n                        currencyCode\n                        }\n                        totalDutyAmount {\n                        amount\n                        currencyCode\n                        }\n                    }\n                    }\n                }\n                }\n            ",n.next=7,regeneratorRuntime.awrap((0,_nodeFetch.default)("https://".concat(process.env.SHOPIFY_DOMAIN,"/api/2023-10/graphql.json"),{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":process.env.SHOPIFY_PUB},body:JSON.stringify({query:"\n                mutation createCart($cartInput: CartInput) {\n                cartCreate(input: $cartInput) {\n                    cart {\n                    id\n                    createdAt\n                    updatedAt\n                    checkoutUrl\n                    lines(first: 10) {\n                        edges {\n                        node {\n                            id\n                            merchandise {\n                            ... on ProductVariant {\n                                id\n                            }\n                            }\n                        }\n                        }\n                    }\n                    attributes {\n                        key\n                        value\n                    }\n                    cost {\n                        totalAmount {\n                        amount\n                        currencyCode\n                        }\n                        subtotalAmount {\n                        amount\n                        currencyCode\n                        }\n                        totalTaxAmount {\n                        amount\n                        currencyCode\n                        }\n                        totalDutyAmount {\n                        amount\n                        currencyCode\n                        }\n                    }\n                    }\n                }\n                }\n            ",variables:{cartInput:{lines:r}}})}));n.next=21;break;case 7:return a=n.sent,n.next=10,regeneratorRuntime.awrap(a.json());case 10:o=n.sent,e.status(200).json(o),console.log(o),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(1),console.error(n.t0),e.status(500).json({error:"Error creating cart"});case 19:n.next=23;break;case 21:e.setHeader("Allow",["POST"]),e.status(405).end("Method ".concat(t.method," Not Allowed"));case 23:case"end":return n.stop()}},null,null,[[1,15]])}
//# sourceMappingURL=cart.min.js.map
