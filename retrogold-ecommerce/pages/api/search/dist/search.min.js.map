{"version":3,"sources":["search.js"],"names":["_apiUtil","require","handler","req","res","userSearch","_userSearch","sanityResults","shopifyResults","combinedResults","regeneratorRuntime","async","_context","prev","next","method","status","end","abrupt","body","console","log","json","error","awrap","searchSanity","sent","searchShopify","concat","_toConsumableArray","t0","stop"],"mappings":"2FAAA,IAAAA,SAAAC,QAAA,ueAEA,SAAeC,QAAQC,EAAKC,GAA5B,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GACqB,SAAfX,EAAIY,OADV,OAEMX,EAAIY,OAAO,KAAKC,MAFtBL,EAAAM,OAAA,UAAAN,EAAAE,KAAA,EAAA,MAAA,KAAA,EAAA,GAMQT,EAAaF,EAAIgB,KAAKd,WAC5Be,QAAQC,IAAIhB,GAPdO,EAAAC,KAAA,EAWYR,EAAaF,EAAIgB,KAAKd,WAXlC,CAAAO,EAAAE,KAAA,GAAA,MAAA,OAcQV,EAAIY,OAAO,KAAKM,KAAK,CAAEC,MAAO,4BAdtCX,EAAAM,OAAA,UAAA,KAAA,GAAA,OAAAN,EAAAE,KAAA,GAAAJ,mBAAAc,OAAA,EAAAxB,SAAAyB,cAAApB,IAAA,KAAA,GAAA,OAAAE,EAAAK,EAAAc,KAAAd,EAAAE,KAAA,GAAAJ,mBAAAc,OAAA,EAAAxB,SAAA2B,eAAAtB,IAAA,KAAA,GAAAG,EAAAI,EAAAc,KAAAN,QAAAC,IAAAb,IAAAD,GAAAC,KAAAC,EAAA,GAAAmB,OAAAC,mBAAAtB,GAAAsB,mBAAArB,IA0BQJ,EAAIY,OAAO,KAAKM,KAAKb,IA1B7BG,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,MAAA,GAAAQ,QAAAC,IAAA,2BAAAT,EAAAkB,IAAA,KAAA,GAAA,IAAA,MAAA,OAAAlB,EAAAmB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,mBAiCe7B","file":"search.min.js","sourcesContent":["import { searchSanity, searchShopify } from '@/helpers/api-util';\n\nasync function handler(req, res) {\n  if (req.method !== \"POST\") {\n      res.status(405).end(); // Method Not Allowed\n      return;\n  }\n\n  const userSearch = req.body.userSearch; // Assuming you're passing search as a query parameter\n  console.log(userSearch);\n\n\n    try{\n      const userSearch = req.body.userSearch; // Assuming you're passing search as a query parameter\n      \n      if (!userSearch) {\n        res.status(400).json({ error: 'Search query is missing' });\n        return;\n      }\n      \n      const sanityResults = await searchSanity(userSearch);\n      const shopifyResults = await searchShopify(userSearch);\n\n      console.log(shopifyResults);\n      \n      \n      if(sanityResults || shopifyResults){\n        const combinedResults = [...sanityResults, ...shopifyResults]\n        res.status(200).json(combinedResults);\n      }\n    }catch(error){\n      console.log('Error fetching response:', error)\n    }\n}\n\nexport default handler;\n"]}