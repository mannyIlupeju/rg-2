"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getServerSideProps=getServerSideProps,exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_head=_interopRequireDefault(require("next/head")),_image=_interopRequireDefault(require("next/image")),_link=_interopRequireDefault(require("next/link")),_Navigation=_interopRequireDefault(require("@/components/Shared/Navigation")),_footer=_interopRequireDefault(require("@/components/Shared/Footer/footer")),_cookie=_interopRequireDefault(require("cookie")),_context2=require("@/ Context/context"),_reactRedux=require("react-redux"),_store=require("../../store"),_fa=require("react-icons/fa");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache();if(n&&n.has(e))return n.get(e);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}var Cart=function(e){var n=e.cartData,t=((0,_reactRedux.useSelector)(function(e){return e.cart}),(0,_reactRedux.useSelector)(function(e){return e.totalQuantity}),(0,_reactRedux.useSelector)(function(e){return e.quantity}),(0,_reactRedux.useSelector)(function(e){return e.totalPrice}),(0,_reactRedux.useDispatch)());(0,_react.useEffect)(function(){if(n.data.cart.lines){var e=n.data.cart.lines.edges;t((0,_store.initializeCart)(e))}},[n,t])},_default=Cart;function getServerSideProps(n){var t,r,o,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.req,r=_cookie.default.parse(t.headers.cookie||""),o=r.cartId,console.log(o),o){e.next=6;break}return e.abrupt("return",{props:{cartData:null}});case 6:return e.prev=6,"\n            query cartQuery($cartId: ID!) {\n              cart(id: $cartId) {\n                id\n                createdAt\n                updatedAt\n                checkoutUrl\n                lines(first: 10) {\n                  edges {\n                    node {\n                      id\n                      quantity\n                      merchandise {\n                        ... on ProductVariant {\n                          id\n                          image {\n                            src\n                            altText\n                          }\n                          priceV2 {\n                            amount\n                            currencyCode\n                          }\n                          product {\n                            vendor\n                          }\n                        }\n                      }\n                      attributes {\n                        key\n                        value\n                      }\n                    }\n                  }\n                }\n                attributes {\n                  key\n                  value\n                }\n                cost {\n                  totalAmount {\n                    amount\n                    currencyCode\n                  }\n                  subtotalAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalTaxAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalDutyAmount {\n                    amount\n                    currencyCode\n                  }\n                }\n                buyerIdentity {\n                  email\n                  phone\n                  customer {\n                    id\n                  }\n                  countryCode\n                }\n              }\n            }\n        ",e.next=10,regeneratorRuntime.awrap(fetch("https://".concat(process.env.SHOPIFY_DOMAIN,"/api/2023-10/graphql.json"),{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":process.env.SHOPIFY_PUB},body:JSON.stringify({query:"\n            query cartQuery($cartId: ID!) {\n              cart(id: $cartId) {\n                id\n                createdAt\n                updatedAt\n                checkoutUrl\n                lines(first: 10) {\n                  edges {\n                    node {\n                      id\n                      quantity\n                      merchandise {\n                        ... on ProductVariant {\n                          id\n                          image {\n                            src\n                            altText\n                          }\n                          priceV2 {\n                            amount\n                            currencyCode\n                          }\n                          product {\n                            vendor\n                          }\n                        }\n                      }\n                      attributes {\n                        key\n                        value\n                      }\n                    }\n                  }\n                }\n                attributes {\n                  key\n                  value\n                }\n                cost {\n                  totalAmount {\n                    amount\n                    currencyCode\n                  }\n                  subtotalAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalTaxAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalDutyAmount {\n                    amount\n                    currencyCode\n                  }\n                }\n                buyerIdentity {\n                  email\n                  phone\n                  customer {\n                    id\n                  }\n                  countryCode\n                }\n              }\n            }\n        ",variables:{cartId:o}})}));case 10:if((a=e.sent).ok){e.next=13;break}throw new Error("HTTP error! Status: ".concat(a.status));case 13:return e.next=15,regeneratorRuntime.awrap(a.json());case 15:return u=e.sent,console.log(u),e.abrupt("return",{props:{cartData:u}});case 20:return e.prev=20,e.t0=e.catch(6),console.error("Error fetching cart data:",e.t0),e.abrupt("return",{props:{cartData:null}});case 24:case"end":return e.stop()}},null,null,[[6,20]])}exports.default=_default;
//# sourceMappingURL=index.min.js.map
