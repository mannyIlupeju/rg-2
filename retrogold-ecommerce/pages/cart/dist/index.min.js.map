{"version":3,"sources":["index.js"],"names":["_react","_interopRequireWildcard","require","_head","_interopRequireDefault","_image","_link","_Navigation","_footer","_cookie","_context2","_reactRedux","_store","_fa","Cart","_ref","cartData","dispatch","useSelector","state","cart","totalQuantity","quantity","totalPrice","useDispatch","useEffect","data","lines","fetchedCartData","edges","initializeCart","getServerSideProps","context","req","parsedCookies","cartId","response","regeneratorRuntime","async","_context","prev","next","Cookies","parse","headers","cookie","console","log","abrupt","awrap","fetch","concat","process","env","SHOPIFY_DOMAIN","method","Content-Type","X-Shopify-Storefront-Access-Token","SHOPIFY_PUB","body","JSON","stringify","query","variables","sent","ok","Error","status","json","props","t0","error","stop"],"mappings":"0XAAA,IAAAA,OAAAC,wBAAAC,QAAA,UACAC,MAAAC,uBAAAF,QAAA,cACAG,OAAAD,uBAAAF,QAAA,eACAI,MAAAF,uBAAAF,QAAA,cACAK,YAAAH,uBAAAF,QAAA,mCACAM,QAAAJ,uBAAAF,QAAA,sCACAO,QAAAL,uBAAAF,QAAA,WACAQ,UAAAR,QAAA,sBACAS,YAAAT,QAAA,eACAU,OAAAV,QAAA,eAEAW,IAAAX,QAAA,ysBATA,IAAAY,KAAA,SAAAC,GAAA,IAAAC,EAAAD,EAAAC,SAmBQC,IAlBR,EAAAN,YAAAO,aAAA,SAAAC,GAAA,OAAAA,EAAAC,QAcuB,EAAAT,YAAAO,aAAY,SAACC,GAAD,OAAWA,EAAME,iBAbpD,EAAAV,YAAAO,aAAA,SAAAC,GAAA,OAAAA,EAAAG,YAeqB,EAAAX,YAAAO,aAAY,SAACC,GAAD,OAAWA,EAAMI,cAE/B,EAAAZ,YAAAa,iBAIjB,EAAAxB,OAAAyB,WAAU,WAjBZ,GAAAT,EAAAU,KAAAN,KAAAO,MAAA,CAmBM,IAAMC,EAAkBZ,EAASU,KAAKN,KAAKO,MAAME,MAEjDZ,GAAS,EAAAL,OAAAkB,gBAAeF,MAEzB,CAACZ,EAAUC,cA8HDH,KAMR,SAAeiB,mBAAfC,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAApB,EAAA,OAAAqB,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GAAAR,EAAAD,EAAAC,IAAAC,EAAAQ,QAAAA,QAAAC,MAAAV,EAAAW,QAAAC,QAAA,IAAAV,EAAAD,EAAAC,OAAAW,QAAAC,IAAAZ,GAECD,EAFD,CAAAK,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAS,OAAA,SAICb,CAAAA,MAASD,CAAAA,SAAAA,QAJV,KAAA,EAAA,OAAAK,EAAAC,KAAA,EAAA,24DAAAD,EAAAE,KAAA,GAAAJ,mBAAAY,MAkFoBC,MAAK,WAAAC,OAAYC,QAAQC,IAAIC,eAAxB,6BAAmE,CAC7FC,OAAQ,OACRX,QAAS,CACPY,eAAgB,mBAChBC,oCAAqCL,QAAQC,IAAIK,aAEnDC,KAAMC,KAAKC,UAAU,CACnBC,MAzFD,24DA0FCC,UAAW,CAAE5B,OAAAA,QA1Fd,KAAA,GAAA,IAkFGC,EAlFHG,EAAAyB,MA8FWC,GA9FX,CAAA1B,EAAAE,KAAA,GAAA,MAAA,MA+FK,IAAIyB,MAAJ,uBAAAf,OAAiCf,EAAS+B,SA/F/C,KAAA,GAAA,OAAA5B,EAAAE,KAAA,GAAAJ,mBAAAY,MAkGoBb,EAASgC,QAlG7B,KAAA,GAAA,OAkGGpD,EAlGHuB,EAAAyB,KAmGHlB,QAAQC,IAAI/B,GAnGTuB,EAAAS,OAAA,SAoGI,CACLqB,MAAO,CAAErD,SAAAA,KArGR,KAAA,GAAA,OAAAuB,EAAAC,KAAA,GAAAD,EAAA+B,GAAA/B,EAAA,MAAA,GAwGHO,QAAQyB,MAAM,4BAAdhC,EAAA+B,IAxGG/B,EAAAS,OAAA,SAyGI,CAAEqB,MAAO,CAAErD,SAAU,QAzGzB,KAAA,GAAA,IAAA,MAAA,OAAAuB,EAAAiC,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"index.min.js","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Head from 'next/head'\nimport Image from 'next/image'\nimport Link from 'next/link'\nimport Navigation from '@/components/Shared/Navigation';\nimport Footer from '@/components/Shared/Footer/footer';\nimport Cookies from 'cookie';\nimport { useGlobalContext } from '@/ Context/context';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { onRemove, toggleCartItemQuantity, initializeCart } from '../../store'\n\nimport { FaMinus, FaPlus } from 'react-icons/fa';\n\n\nconst Cart = ({ cartData }) => {  \n\n  const cartItems = useSelector((state) => state.cart)\n  const cartQuantity = useSelector((state) => state.totalQuantity)\n  const quantity = useSelector((state) => state.quantity)\n  const totalPrice = useSelector((state) => state.totalPrice)\n\n  const dispatch = useDispatch();\n\n\n\n  useEffect(() => {\n    if(cartData.data.cart.lines){\n      const fetchedCartData = cartData.data.cart.lines.edges\n      \n      dispatch(initializeCart(fetchedCartData))\n    }\n  }, [cartData, dispatch])\n\n  // useEffect(() => {\n  //   if (cartData && cartData.data && cartData.data.cart && cartData.data.cart.lines) {\n  //     // Convert cartData to the format expected by your store\n  //     const formattedCartData = cartData.data.cart.lines.edges.map(edge => ({\n\n  //       id: edge.node.id,\n  //       // other fields according to your cartData structure\n  //     }));\n  //     dispatch(initializeCart(formattedCartData));\n  //   }\n  // }, [cartData, dispatch]);\n\n \n  function handleRemove(_id) {\n    console.log(_id)\n    dispatch(onRemove({ _id }))\n  }\n\n  function handleToggle(_id, value) {\n    dispatch(toggleCartItemQuantity({\n      _id,\n      value\n    }))\n  }\n\n \n\n  \n  \n\n \n\n\n\n\n  // return (\n  //   <>\n  //     <Head>\n  //       <title>Cart</title>\n  //       <meta name=\"description\" content=\"Generated by create next app\" />\n  //       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  //       <link rel=\"icon\" href=\"/favicon.ico\" />\n  //     </Head>\n  //     <Navigation />\n\n\n  //     <main>\n  //       <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 mb-12\">\n  //         {cartItems.length ?\n  //           <>\n  //             <h1 className=\"text-xl sm:text-2xl md:text-3xl font-bold text-zinc-700\">Your Cart</h1>\n            \n  //             <div className=\"flex flex-col gap-8 justify-center\">\n  //               {cartItems.map((items, index) => {\n                  \n  //                 const { vendor, title, price, images, quantity, _id } = items\n\n\n  //                 return (\n  //                   <div key={index}>\n  //                     <div className=\"flex flex-col justify-between text-zinc-700\" >\n  //                       <div>\n  //                         <div className=\"flex gap-4\">\n  //                             <div>\n  //                               <Image src={images} alt={title} width=\"200\" height=\"200\" className=\"cartImage\" />\n  //                             </div>\n  //                             <div className=\"flex flex-col gap-4\">\n  //                               <h1 className=\"text-lg\"><span className=\"font-bold\">{vendor}</span></h1>\n  //                               <p className=\"text-md \">Item: {title}</p>\n  //                             <div className=\"flex gap-4 \">\n  //                               <FaPlus className=\"\" onClick={() => { handleToggle(_id, 'inc') }} />\n  //                               <span className=\"text-lg\">{quantity}</span>\n  //                               <FaMinus className=\"flex\" onClick={() => { handleToggle(id, 'dec') }} />\n  //                             </div>\n  //                             <div>\n  //                               <h1 className=\"text-xl\">${price}</h1>\n  //                             </div>\n  //                             <div className=\" text-zinc-700 font-bold underline\">\n  //                               <button onClick={() => handleRemove(_id)}>\n  //                                 <p>On Remove</p>\n  //                               </button>\n  //                             </div>\n  //                           </div>\n  //                         </div>\n  //                       </div>\n\n                    \n\n\n  //                     </div>\n  //                   </div>\n  //                 )\n  //               })\n\n  //               }\n  //               <div className=\"flex justify-between text-zinc-700\">\n  //                 <h1 className=\"text-2xl\">Subtotal</h1>\n  //                 <p className=\"text-2xl font-bold\">${totalPrice}</p>\n  //               </div>\n  //             </div>\n  //             <div className=\"my-24 flex justify-end\">\n  //               <button className=\"btn\">Checkout</button>\n  //             </div>\n  //           </>\n  //           :\n  //           <div className=\"text-center\">\n  //             <div className=\"flex justify-center\">\n  //               <Image src='/images/shopping-cart-10925.png' width={40} height={40} alt=\"shopping cart icon\" />\n  //             </div>\n  //             <div className=\"mt-4\">\n  //               <h1 className=\"text-6xl font-bold text-zinc-700\">Cart is Empty</h1>\n  //             </div>\n  //             <div className=\"mt-24\">\n  //               <button className=\"text-2xl btn\"><Link href='/shop'>Back To Shop</Link></button>\n  //             </div>\n  //           </div>\n  //         }\n  //       </div>\n  //     </main>\n  //     <Footer />\n  //   </>\n  // );\n}\n\nexport default Cart;\n\n\n\n\n\nexport async function getServerSideProps(context){\n  const {req} = context;\n  const parsedCookies = Cookies.parse(req.headers.cookie || '');\n\n  const cartId = parsedCookies.cartId;\n  console.log(cartId);\n\n  if(!cartId) {\n    return { props: {cartData: null}}\n  }\n\n  try {\n    const query = `\n            query cartQuery($cartId: ID!) {\n              cart(id: $cartId) {\n                id\n                createdAt\n                updatedAt\n                checkoutUrl\n                lines(first: 10) {\n                  edges {\n                    node {\n                      id\n                      quantity\n                      merchandise {\n                        ... on ProductVariant {\n                          id\n                          image {\n                            src\n                            altText\n                          }\n                          priceV2 {\n                            amount\n                            currencyCode\n                          }\n                          product {\n                            vendor\n                          }\n                        }\n                      }\n                      attributes {\n                        key\n                        value\n                      }\n                    }\n                  }\n                }\n                attributes {\n                  key\n                  value\n                }\n                cost {\n                  totalAmount {\n                    amount\n                    currencyCode\n                  }\n                  subtotalAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalTaxAmount {\n                    amount\n                    currencyCode\n                  }\n                  totalDutyAmount {\n                    amount\n                    currencyCode\n                  }\n                }\n                buyerIdentity {\n                  email\n                  phone\n                  customer {\n                    id\n                  }\n                  countryCode\n                }\n              }\n            }\n        `;\n    // Replace 'your GraphQL query here' with your actual query.\n\n    const response = await fetch(`https://${process.env.SHOPIFY_DOMAIN}/api/2023-10/graphql.json`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Shopify-Storefront-Access-Token': process.env.SHOPIFY_PUB,\n      },\n      body: JSON.stringify({\n        query,\n        variables: { cartId },\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n\n    const cartData = await response.json();\n    console.log(cartData);\n    return {\n      props: { cartData },\n    };\n  } catch (error) {\n    console.error('Error fetching cart data:', error);\n    return { props: { cartData: null } };\n  }\n}\n"]}