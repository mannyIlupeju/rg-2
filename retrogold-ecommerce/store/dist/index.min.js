"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.initializeCart=exports.toggleCartItemQuantity=exports.onRemove=exports.addToCart=exports.persistor=void 0;var _toolkit=require("@reduxjs/toolkit"),_reduxPersist=require("redux-persist"),_storage=_interopRequireDefault(require("redux-persist/lib/storage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var initialState={cart:[],totalPrice:0,totalQuantity:1},cartSlice=(0,_toolkit.createSlice)({name:"cart",initialState:initialState,reducers:{initializeCart:function(t,e){t.cart=e.payload.map(function(t){return _objectSpread({},t,{price:t.priceV2,quantity:t.quantity||0})}),t.totalQuantity=t.cart.reduce(function(t,e){return t+e.node.quantity},0),t.totalPrice=t.cart.reduce(function(t,e){return t+e.price*e.quantity},0)},addToCart:function(t,e){var r=t.cart.findIndex(function(t){return t.id===e.payload.id});-1!==r?t.cart[r].quantity+=e.payload.quantity||1:t.cart.push(_objectSpread({},e.payload,{quantity:e.payload.quantity||1})),t.totalQuantity=t.cart.reduce(function(t,e){return t+e.node.quantity},0),t.totalPrice=t.cart.reduce(function(t,e){return t+e.price*e.quantity},0)},onRemove:function(t,e){var r=t.cart.find(function(t){return t.node.id===e.payload.id});r&&(t.cart=t.cart.filter(function(t){return t.node.id!==r.node.id}),t.totalPrice=t.cart.reduce(function(t,e){return t+e.node.price*e.node.quantity},0))},toggleCartItemQuantity:function(t,e){var r=t.cart.findIndex(function(t){return t.id===e.payload.id});if(-1!==r){var a=_toConsumableArray(t.cart),i=a[r];"inc"===e.payload.value?i.quantity++:"dec"===e.payload.value&&(1<i.quantity?i.quantity--:a.splice(r,1)),t.cart=a,t.totalQuantity=a.reduce(function(t,e){return t+e.quantity},0),t.totalPrice=a.reduce(function(t,e){return t+e.price*e.quantity},0)}}}}),persistConfig={key:"root",storage:_storage.default},persistedReducer=(0,_reduxPersist.persistReducer)(persistConfig,cartSlice.reducer),store=(0,_toolkit.configureStore)({reducer:persistedReducer}),persistor=(0,_reduxPersist.persistStore)(store);exports.persistor=persistor;var _cartSlice$actions=cartSlice.actions,addToCart=_cartSlice$actions.addToCart,onRemove=_cartSlice$actions.onRemove,toggleCartItemQuantity=_cartSlice$actions.toggleCartItemQuantity,initializeCart=_cartSlice$actions.initializeCart;exports.initializeCart=initializeCart,exports.toggleCartItemQuantity=toggleCartItemQuantity,exports.onRemove=onRemove,exports.addToCart=addToCart;var _default=store;exports.default=_default;
//# sourceMappingURL=index.min.js.map
